<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <title>Pro Guitar Tuner Online (Microphone Supported) - Xizoa Tools</title>
    <meta name="description" content="Use your microphone to tune your guitar online. Real-time chromatic tuner with visual needle. Supports Standard E Tuning (EADGBE). Free and accurate.">
    <meta name="keywords" content="microphone guitar tuner, online guitar tuner mic, chromatic tuner online, guitar frequency checker, xizoa music tools">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://tools.xizoa.com/guitar-tuner">
    <link rel="icon" href="https://xizoa.com/favicon.ico">

    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;800&family=Orbitron:wght@700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        /* --- THEME: PRO STUDIO --- */
        :root {
            --bg: #0d0e12;
            --panel: #16181f;
            --primary: #ffb703; /* Gold */
            --success: #00ff9d; /* Green */
            --danger: #ff4757; /* Red */
            --text: #e2e8f0;
            --border: 1px solid rgba(255, 255, 255, 0.1);
        }

        * { margin:0; padding:0; box-sizing:border-box; font-family: 'Outfit', sans-serif; }
        body { background-color: var(--bg); color: var(--text); min-height: 100vh; display: flex; flex-direction: column; }

        /* Header */
        header { padding: 15px 5%; border-bottom: var(--border); background: rgba(22, 24, 31, 0.95); display: flex; justify-content: space-between; align-items: center; position: sticky; top: 0; z-index: 100; backdrop-filter: blur(10px); }
        .brand { font-size: 1.5rem; font-weight: 800; color: #fff; text-decoration: none; }
        .brand span { color: var(--primary); }

        /* MAIN CONTAINER */
        .container { max-width: 800px; margin: 40px auto; padding: 0 20px; width: 100%; }

        /* --- TUNER DISPLAY (METER) --- */
        .tuner-card {
            background: var(--panel); border: var(--border); border-radius: 20px;
            padding: 40px 20px; text-align: center; position: relative;
            box-shadow: 0 0 50px rgba(0,0,0,0.5);
        }

        .note-display {
            font-family: 'Orbitron', sans-serif; font-size: 5rem; font-weight: 700;
            color: #555; margin-bottom: 10px; transition: 0.2s;
        }
        .note-display.active { color: var(--primary); text-shadow: 0 0 30px var(--primary); }
        .note-display.tuned { color: var(--success); text-shadow: 0 0 30px var(--success); }

        .status-text { font-size: 1.2rem; color: #888; font-weight: 600; min-height: 30px; margin-bottom: 20px; }

        /* NEEDLE METER */
        .meter-wrapper {
            width: 300px; height: 150px; margin: 0 auto 20px; position: relative; overflow: hidden;
        }
        .meter-bg {
            width: 300px; height: 150px; background: radial-gradient(circle at 50% 100%, #2a2d3a 0%, transparent 60%);
            border-top-left-radius: 150px; border-top-right-radius: 150px;
            border: 2px solid #333; border-bottom: none;
        }
        .needle {
            width: 4px; height: 140px; background: var(--danger);
            position: absolute; bottom: 0; left: 50%; transform-origin: bottom center;
            transform: translateX(-50%) rotate(0deg); /* 0deg is center */
            transition: transform 0.1s linear, background-color 0.2s;
            border-radius: 4px; z-index: 10;
        }
        .center-mark {
            position: absolute; bottom: 0; left: 50%; transform: translateX(-50%);
            width: 10px; height: 20px; background: var(--success); z-index: 5;
        }

        /* START BUTTON */
        .btn-mic {
            background: var(--primary); color: #000; font-size: 1.1rem; font-weight: 800;
            padding: 15px 40px; border: none; border-radius: 50px; cursor: pointer;
            display: inline-flex; align-items: center; gap: 10px; transition: 0.3s;
            box-shadow: 0 0 20px rgba(255, 183, 3, 0.3);
        }
        .btn-mic:hover { transform: scale(1.05); }
        .btn-mic.listening { background: var(--danger); color: #fff; animation: pulse 1.5s infinite; }

        @keyframes pulse { 0% { box-shadow: 0 0 0 0 rgba(255, 71, 87, 0.4); } 70% { box-shadow: 0 0 0 20px rgba(255, 71, 87, 0); } 100% { box-shadow: 0 0 0 0 rgba(255, 71, 87, 0); } }

        /* FREQ DISPLAY */
        .freq-box { margin-top: 20px; color: #666; font-family: monospace; font-size: 1.1rem; }
        .freq-box span { color: var(--primary); }

        /* --- MANUAL REFERENCE TONES (Bottom) --- */
        .manual-section { margin-top: 50px; }
        .strings-row { display: flex; justify-content: center; gap: 10px; flex-wrap: wrap; margin-top: 20px; }
        .string-btn {
            width: 50px; height: 50px; border-radius: 50%; border: 2px solid #333;
            background: #1a1d24; color: #fff; font-weight: 700; cursor: pointer;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            font-size: 0.8rem; transition: 0.2s;
        }
        .string-btn:hover { border-color: var(--primary); color: var(--primary); }
        .string-btn.playing { background: var(--primary); color: #000; border-color: var(--primary); }

        /* SEO Content */
        .wiki-section { margin-top: 60px; border-top: var(--border); padding-top: 40px; }
        .wiki-card { background: rgba(255,255,255,0.02); padding: 30px; border-radius: 12px; margin-bottom: 20px; border: var(--border); }
        .wiki-card h2 { color: #fff; margin-bottom: 15px; font-family: 'Orbitron', sans-serif; }
        .wiki-card p { color: #94a3b8; line-height: 1.7; margin-bottom: 10px; }

        footer { text-align: center; padding: 40px; border-top: var(--border); color: #666; margin-top: auto; }

        @media (max-width: 600px) {
            .note-display { font-size: 4rem; }
            .meter-wrapper { width: 260px; height: 130px; }
            .meter-bg { width: 260px; height: 130px; }
        }
    </style>
</head>
<body>

    <header>
        <a href="index.html" class="brand"><i class="fas fa-guitar"></i> XIZOA <span>TUNER</span></a>
    </header>

    <div class="container">
        
        <div class="tuner-card">
            
            <div class="meter-wrapper">
                <div class="meter-bg"></div>
                <div class="center-mark"></div>
                <div class="needle" id="needle"></div>
            </div>

            <div class="note-display" id="noteDisplay">--</div>
            <div class="status-text" id="statusText">Click Start to Tune</div>

            <button class="btn-mic" id="startBtn" onclick="toggleTuner()">
                <i class="fas fa-microphone"></i> Start Tuner
            </button>

            <div class="freq-box">Frequency: <span id="freqDisplay">0.0</span> Hz</div>
        </div>

        <div class="manual-section">
            <h3 style="text-align:center; color:#888; font-size:0.9rem; text-transform:uppercase;">Or Play Reference Tone</h3>
            <div class="strings-row">
                <div class="string-btn" onclick="playTone(82.41, this)">E2</div>
                <div class="string-btn" onclick="playTone(110.00, this)">A2</div>
                <div class="string-btn" onclick="playTone(146.83, this)">D3</div>
                <div class="string-btn" onclick="playTone(196.00, this)">G3</div>
                <div class="string-btn" onclick="playTone(246.94, this)">B3</div>
                <div class="string-btn" onclick="playTone(329.63, this)">E4</div>
            </div>
        </div>

        <section class="wiki-section">
            <div class="wiki-card">
                <h2>How to use this Guitar Tuner?</h2>
                <p>This tool works exactly like a physical clip-on tuner or app. It uses your device's microphone to listen to your guitar string.</p>
                <ol style="margin-left:20px; color:#94a3b8; margin-bottom:15px;">
                    <li>Click the yellow <strong>"Start Tuner"</strong> button and allow microphone access.</li>
                    <li>Pluck a string on your guitar continuously (e.g., Low E).</li>
                    <li>Watch the needle:
                        <ul>
                            <li><strong>Needle Left:</strong> The note is Flat (Too Low). Tighten the string.</li>
                            <li><strong>Needle Right:</strong> The note is Sharp (Too High). Loosen the string.</li>
                            <li><strong>Needle Center (Green):</strong> Perfect pitch!</li>
                        </ul>
                    </li>
                </ol>
            </div>

            <div class="wiki-card">
                <h2>Standard Tuning Frequencies (Hz)</h2>
                <p>For advanced users, here are the exact frequencies for Standard E Tuning:</p>
                <ul style="list-style:none; color:#primary;">
                    <li><strong>E (Low):</strong> 82.41 Hz</li>
                    <li><strong>A:</strong> 110.00 Hz</li>
                    <li><strong>D:</strong> 146.83 Hz</li>
                    <li><strong>G:</strong> 196.00 Hz</li>
                    <li><strong>B:</strong> 246.94 Hz</li>
                    <li><strong>E (High):</strong> 329.63 Hz</li>
                </ul>
            </div>
        </section>

    </div>

    <footer>
        <p>Â© 2025 Xizoa Hub â€¢ Engineered by Priyanshu</p>
    </footer>

    <script>
        // --- CONFIGURATION ---
        const noteStrings = ["C", "C#", "D", "D#", "E", "F", "F#", "G", "G#", "A", "A#", "B"];
        let audioContext = null;
        let analyser = null;
        let mediaStreamSource = null;
        let isListening = false;
        let animationId = null;

        // UI Elements
        const noteEl = document.getElementById('noteDisplay');
        const statusEl = document.getElementById('statusText');
        const needleEl = document.getElementById('needle');
        const freqEl = document.getElementById('freqDisplay');
        const startBtn = document.getElementById('startBtn');

        // --- 1. MICROPHONE TUNER LOGIC ---
        
        async function toggleTuner() {
            if (isListening) {
                stopTuner();
            } else {
                startTuner();
            }
        }

        async function startTuner() {
            try {
                audioContext = new (window.AudioContext || window.webkitAudioContext)();
                const stream = await navigator.mediaDevices.getUserMedia({ audio: true });
                
                mediaStreamSource = audioContext.createMediaStreamSource(stream);
                analyser = audioContext.createAnalyser();
                analyser.fftSize = 2048;
                mediaStreamSource.connect(analyser);

                isListening = true;
                startBtn.classList.add('listening');
                startBtn.innerHTML = '<i class="fas fa-stop"></i> Stop Tuner';
                statusEl.innerText = "Pluck a string...";
                
                updatePitch();
            } catch (err) {
                alert("Microphone access denied or not supported. Please allow permission.");
                console.error(err);
            }
        }

        function stopTuner() {
            isListening = false;
            startBtn.classList.remove('listening');
            startBtn.innerHTML = '<i class="fas fa-microphone"></i> Start Tuner';
            statusEl.innerText = "Tuner Stopped";
            noteEl.classList.remove('active', 'tuned');
            noteEl.innerText = "--";
            needleEl.style.transform = `translateX(-50%) rotate(0deg)`;
            
            if (audioContext) audioContext.close();
            cancelAnimationFrame(animationId);
        }

        // --- THE ALGORITHM (Auto-Correlation) ---
        function updatePitch() {
            if (!isListening) return;

            const bufferLength = analyser.fftSize;
            const buffer = new Float32Array(bufferLength);
            analyser.getFloatTimeDomainData(buffer);

            const frequency = autoCorrelate(buffer, audioContext.sampleRate);

            if (frequency === -1) {
                // No sound / too quiet
                // Keep previous state or reset slightly? Let's just hold or minor reset
            } else {
                const note = noteFromPitch(frequency);
                const noteName = noteStrings[note % 12];
                
                // Update UI
                noteEl.innerText = noteName;
                freqEl.innerText = Math.round(frequency);
                noteEl.classList.add('active');

                // Calculate Cents (How far off)
                const detune = centsOffFromPitch(frequency, note);
                
                // Move Needle (-45deg to +45deg)
                // Detune usually goes -50 to +50 cents
                let angle = detune * 2; // Amplify movement
                if (angle > 45) angle = 45;
                if (angle < -45) angle = -45;

                needleEl.style.transform = `translateX(-50%) rotate(${angle}deg)`;

                // Color Logic
                if (Math.abs(detune) < 5) {
                    statusEl.innerText = "PERFECT TUNE! âœ…";
                    statusEl.style.color = "#00ff9d";
                    needleEl.style.backgroundColor = "#00ff9d";
                    noteEl.classList.add('tuned');
                } else if (detune < 0) {
                    statusEl.innerText = "Too Low (Tighten) ðŸ”¼";
                    statusEl.style.color = "#ff4757";
                    needleEl.style.backgroundColor = "#ff4757";
                    noteEl.classList.remove('tuned');
                } else {
                    statusEl.innerText = "Too High (Loosen) ðŸ”½";
                    statusEl.style.color = "#ff4757";
                    needleEl.style.backgroundColor = "#ff4757";
                    noteEl.classList.remove('tuned');
                }
            }

            animationId = requestAnimationFrame(updatePitch);
        }

        // Standard Auto-Correlate Function (Industry Standard for Web Tuners)
        function autoCorrelate(buf, sampleRate) {
            let SIZE = buf.length;
            let rms = 0;

            for (let i = 0; i < SIZE; i++) {
                let val = buf[i];
                rms += val * val;
            }
            rms = Math.sqrt(rms / SIZE);
            if (rms < 0.01) return -1; // Not enough signal (Silence)

            let r1 = 0, r2 = SIZE - 1, thres = 0.2;
            for (let i = 0; i < SIZE / 2; i++)
                if (Math.abs(buf[i]) < thres) { r1 = i; break; }
            for (let i = 1; i < SIZE / 2; i++)
                if (Math.abs(buf[SIZE - i]) < thres) { r2 = SIZE - i; break; }

            buf = buf.slice(r1, r2);
            SIZE = buf.length;

            let c = new Array(SIZE).fill(0);
            for (let i = 0; i < SIZE; i++)
                for (let j = 0; j < SIZE - i; j++)
                    c[i] = c[i] + buf[j] * buf[j + i];

            let d = 0;
            while (c[d] > c[d + 1]) d++;
            let maxval = -1, maxpos = -1;
            for (let i = d; i < SIZE; i++) {
                if (c[i] > maxval) {
                    maxval = c[i];
                    maxpos = i;
                }
            }
            let T0 = maxpos;

            let x1 = c[T0 - 1], x2 = c[T0], x3 = c[T0 + 1];
            let a = (x1 + x3 - 2 * x2) / 2;
            let b = (x3 - x1) / 2;
            if (a) T0 = T0 - b / (2 * a);

            return sampleRate / T0;
        }

        function noteFromPitch(frequency) {
            const noteNum = 12 * (Math.log(frequency / 440) / Math.log(2));
            return Math.round(noteNum) + 69;
        }

        function centsOffFromPitch(frequency, note) {
            return Math.floor(1200 * Math.log(frequency / frequencyFromNoteNumber(note)) / Math.log(2));
        }

        function frequencyFromNoteNumber(note) {
            return 440 * Math.pow(2, (note - 69) / 12);
        }

        // --- 2. MANUAL TONE PLAYER (Backup) ---
        let toneOsc = null;
        let toneCtx = new (window.AudioContext || window.webkitAudioContext)();

        function playTone(freq, btn) {
            if (isListening) stopTuner(); // Stop mic if playing tone
            if (toneOsc) toneOsc.stop();

            document.querySelectorAll('.string-btn').forEach(b => b.classList.remove('playing'));
            btn.classList.add('playing');

            toneOsc = toneCtx.createOscillator();
            const gain = toneCtx.createGain();
            
            toneOsc.type = 'triangle';
            toneOsc.frequency.value = freq;
            gain.gain.value = 0.5;
            
            toneOsc.connect(gain);
            gain.connect(toneCtx.destination);
            toneOsc.start();
            
            // Auto stop after 2s
            setTimeout(() => {
                toneOsc.stop();
                btn.classList.remove('playing');
            }, 2000);
        }
    </script>
</body>
</html>
